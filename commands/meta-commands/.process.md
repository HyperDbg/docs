---
description: Description of '.process' command in HyperDbg.
---

# .process (show the current process and switch to another process)

### Command

> .process

### Syntax

> .process \[type (pid | process)] \[new process id (hex) | new EPROCESS address]

### Description

Shows or changes the current process. This command can only be used in **Debugger Mode**. Please take a look at the [**Remarks**](https://docs.hyperdbg.org/commands/meta-commands/.process#remarks) for more information.

If you want to change the process to a new process, after using the '**.process**' command, you should use the '[g](https://docs.hyperdbg.org/commands/debugging-commands/g)' command.

### Parameters

**\[type (pid | process)] (optional)**

It shows that you want to specify a process id or an `_EPROCESS` at the second parameter.

**\[new process id (hex) | new EPROCESS address] (optional)**

The process id or `_EPROCESS` of the process to switch on its memory layout.

{% hint style="success" %}
If you don't specify any parameters to the '**.process**' command, it shows the current process.
{% endhint %}

### Examples

The following command shows the current process.

```diff
2: kHyperDbg> .process
process id: 1e98
process (_EPROCESS): ffff948c`c153b080
```

The following commands change the current process to `0x1ddc`.

```
0: kHyperDbg> .process pid 1ddc
press 'g' to continue the debuggee, if the pid is valid then the debuggee will be automatically paused when it attached to the target process

0: kHyperDbg> g
Debuggee is running...
fffff801`68d91262    0F 01 C1                            vmcall
```

The following commands change the current process to a process with `_EPROCESS` equals to  `ffff948cc2349280`.

```
0: kHyperDbg> .process process ffff948cc2349280
press 'g' to continue the debuggee, if the pid is valid then the debuggee will be automatically paused when it attached to the target process

0: kHyperDbg> g
Debuggee is running...
fffff801`68d91262    0F 01 C1                            vmcall
```

### IOCTL

This commands works over serial by sending the serial packets to the remote computer.

First of all, you should fill the following structure, set the `ProcessId` or `Process` to your target process (if you want to change the current process) and set `GetRemotePid` to **false**, and leave the `Result`.

If you want to get the current process id and `_EPROCESS`, then set the `GetRemotePid` to **true** and leave the `ProcessId` and `Process`.

```c
typedef struct _DEBUGGEE_CHANGE_PROCESS_PACKET {

  BOOLEAN GetRemotePid;
  UINT32 ProcessId;
  UINT64 Process;
  UINT32 Result;

} DEBUGGEE_CHANGE_PROCESS_PACKET, *PDEBUGGEE_CHANGE_PROCESS_PACKET;
```

After that, send the above structure to the debuggee when debuggee is paused and waiting for new command on **vmx-root** mode.

You should send the above structure with `DEBUGGER_REMOTE_PACKET_REQUESTED_ACTION_ON_VMX_ROOT_MODE_CHANGE_PROCESS` as `RequestedAction` and `DEBUGGER_REMOTE_PACKET_TYPE_DEBUGGER_TO_DEBUGGEE_EXECUTE_ON_VMX_ROOT` as `PacketType`.

In return, the debuggee sends the above structure with the following type.

```c
DEBUGGER_REMOTE_PACKET_REQUESTED_ACTION_DEBUGGEE_RESULT_OF_CHANGING_PROCESS
```

In the returned structure, the `Result` is filled by the kernel.

If the `Result` is `DEBUGEER_OPERATION_WAS_SUCCESSFULL`, then the operation was successful, and you should use the '[g](https://docs.hyperdbg.org/commands/debugging-commands/g)' command to move to the new process. Otherwise, the returned result is an error, and the current process is not changed. If you want the current process, then if the `Result` is `DEBUGEER_OPERATION_WAS_SUCCESSFULL`, then the current process id is stored at `ProcessId`.

The following function is responsible for changing the core in the debugger.

```c
BOOLEAN KdSendSwitchProcessPacketToDebuggee(BOOLEAN GetRemotePid, UINT32 NewPid, UINT64 NewProcess);
```

### Remarks

This command force all the cores to cause vm-exit in the case of any changes to the **CR3** register. If you've entered an invalid address as `_EPROCESS` or an invalid process id, HyperDbg keeps checking for the target address or PID, and whenever the debugger is paused again, it won't check for the process anymore.

It also means that if you press the '[g](https://docs.hyperdbg.org/commands/debugging-commands/g)' command and an event or a breakpoint is triggered before switching to the new process, switching will be ignored, and you need to re-switch to the target process and use the '.process' command again.

Some processes might never trigger even if their process id or `EPROCESS` is valid. It is because in these cases, Windows halts or suspends those processes and never switches to them. In these cases, you can switch to the memory layout of the target process by changing **cr3 **to your target **cr3**.

HyperDbg guarantees that the target process won't get the chance to be executed while the switch is performed. However, make sure that your target process is not currently processing on any cores in the processor.

### Requirements

None

### Related

None
